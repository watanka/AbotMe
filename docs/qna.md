
# 프로세스
- 이력서 정보를 기반으로 이력서의 주인에게 추가로 질문할만한 내용들을 보충해서 이력서의 컨텍스트를 보강한다. 이를 통해, 벡터 스토어를 기반으로 답변을 하는 챗봇은 챗봇 유저에게 더 풍부한 이력 정보를 제공할 수 있다.
# 이력서 QnA 시스템 설계

## 기본 정책
- 이력서는 항상 **하나만 관리**된다. 새 이력서 업로드 시 기존 QnA 데이터는 모두 초기화된다.
- 질문 생성은 이력서 업로드 완료 시 **비동기로 동작**한다.
- 각 질문은 이력서 내 특정 부분(label_id)과 연결된다.
- 질문과 답변은 1:1로 페어링되어 저장된다.

## 데이터 구조 예시
```json
{
  "questions": [
    {
      "question_id": "q1",
      "label_id": "L1",
      "question_text": "이력서에서 가장 자신있는 프로젝트는 무엇인가요?",
      "answer": "프로젝트 A입니다." // 답변이 없으면 null 또는 빈 문자열
    },
    ...
  ]
}
```

## API 설계
- **이력서 업로드 시 질문 목록 생성**: 사용자가 새 이력서를 업로드하면, 서버에서 즉시 질문 목록 생성이 트리거된다.
    - (예시 엔드포인트: `POST /resume/` → 업로드 후 내부적으로 `POST /resume/generate-questions` 호출)
    - `generate-questions` 엔드포인트에서는 업로드된 이력서 기반으로 LLM 등으로 질문을 생성하여 `RESUME["questions"]`에 저장한다. 새로운 질문 생성 시 사용할 수 있도록 구성한다. 
- **질문 목록 조회**: `GET /resume/questions`
    - 질문 생성 중이면 "질문 생성 중" 메시지 반환
    - 생성 완료 시 위와 같은 구조로 질문+답변 반환
- **답변 제출**: `POST /resume/questions/{question_id}/answer`
    - payload: `{ "answer_text": "..." }`
    - 해당 질문의 answer 필드가 갱신됨

## 프론트엔드 연동 정책
- 프론트엔드는 `/resume/questions`에서 질문 목록을 받아온다.
- 각 질문에 `answer` 필드가 있으면, QnA 입력 폼의 **placeholder**로 보여준다.
    - 예: `<input placeholder={question.answer || ''} ... />`
- 답변이 없으면 placeholder 없이 빈 입력창.

## 기타
- 보안/인증은 별도 구현되어 있으므로 QnA 로직에서는 신경쓰지 않아도 됨.
- 이력서가 업로드될 때마다 기존 QnA 데이터는 반드시 초기화된다.
- 질문 생성이 비동기이므로, 생성 중 안내 메시지/상태 관리 필요.



## 프롬프트
📝 이력 기반 보충 질문 생성 시스템
목적

이 시스템은 지원자의 이력 정보를 기반으로 채용 담당자가 궁금해할 수 있는 보충 질문을 자동으로 생성하는 것을 목표로 합니다. 이를 통해 경력의 공백, 기술 선택 이유, 문제 해결 과정, 이직 배경, 성과의 구체성 등을 보다 명확하게 파악할 수 있습니다.
✅ 요구사항
1. 입력 데이터 구조

    입력은 단어 단위로 구성되며, 각 단어는 해당 의미 단위(label_id)와 함께 제공됩니다.

    예시:

    [
      ["Google", 1],
      ["에서", 1],
      ["머신러닝", 2],
      ["모델", 2],
      ["개발을", 2],
      ["진행함", 2]
    ]

2. 질문 생성 목표

    질문은 지원자의 경험, 기술, 성과, 의도 등을 더 깊이 이해할 수 있도록 설계되어야 합니다.

    다음과 같은 관점을 포함해야 합니다:

        문제 상황과 그 해결 방법

        이직 사유나 경력의 흐름

        기술 선택의 배경

        협업 방식 및 개인 역할

        구체적 성과(수치, 지표 등)

3. label_id 추적

    생성된 각 질문은 어떤 label_id에 기반해 만들어졌는지 함께 반환되어야 합니다.

    출력 예시:

    {
      "question": "이 프로젝트에서 어떤 문제를 해결하셨고, 어떤 방식으로 접근하셨나요?",
      "based_on_label_id": 2
    }

4. 출력 형식

    출력은 JSON 배열로 구성되며, 각 질문은 다음과 같은 속성을 가집니다:

        question: 자연어 형태의 질문

        based_on_label_id: 이 질문을 유도한 의미 단위 ID

5. 문맥 파악 및 보충

    단순 정보 확인을 넘어, 이력서의 서술이 불완전하거나 암시된 의미를 보충할 수 있는 질문이어야 합니다.

    문장 내 의미 흐름을 파악하여, 아래의 예시처럼 추가 질문을 유도합니다:

        “성능 개선”이 언급되면 → 어떤 성능? 어떤 수치로 개선되었는가?

        특정 기술 사용 → 그 기술을 선택한 이유는?

6. 채용 담당자 관점 고려

    다음과 같은 실제 채용 현장에서 자주 묻는 유형을 포함합니다:

        짧은 근속 → 이직 배경 질문

        기술 다양성 → 선택 이유 또는 적용 방식

        성과 강조 → 정량적 지표나 팀 기여도 질문

        역할 미명시 → 본인의 기여, 리더십 등 질문

⚠️ 제약사항
1. 질문 품질

    질문은 중복 없이, 정중하고 자연스러운 문장으로 구성되어야 하며, 너무 추상적이거나 공격적인 표현은 지양합니다.

        ❌ "왜 그만뒀나요?"

        ✅ "이직을 결정하게 된 계기는 무엇이었나요?"

2. 의미 없는 label 무시

    접속사, 조사, 단순 반복 등 불필요한 단어(label_id) 기반으로는 질문을 생성하지 않습니다.

3. 과도한 추론 제한

    이력서에 없는 정보를 억지로 유도하지 않습니다. 반드시 이력서의 단어나 흐름에 기반해 질문을 구성합니다.

📌 전체 흐름 요약

입력 → 문맥 분석 및 핵심 정보 추출 → 질문 후보 생성 → 자연스러운 문장 정제 → label_id 매핑 → JSON 출력